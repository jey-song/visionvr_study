# å°†æ‚¨çš„ Unity VR åº”ç”¨å¸¦å…¥å®Œå…¨æ²‰æµ¸å¼çš„ç©ºé—´

### # Full spaceæ„å»ºæµç¨‹

* Unity åˆ©ç”¨åˆæˆå™¨æœåŠ¡ï¼Œå¹¶ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæä¾› Metal æ¸²æŸ“åŠŸèƒ½çš„å¼ºå¤§åŠŸèƒ½ã€‚
* Unity è¿˜åˆ©ç”¨ ARKitæ¥è¯†åˆ«æ‚¨çš„èº«ä½“ä½ç½®å’Œå‘¨å›´ç¯å¢ƒï¼ŒåŒ…æ‹¬éª¨éª¼æ‰‹è·Ÿè¸ªã€‚
* Unity åŸºäºè¿™äº›æŠ€æœ¯æ„å»ºï¼Œåœ¨ Unity å¼•æ“ä¸­æä¾›ç›¸åŒçš„æœåŠ¡ã€‚

#### 1. å¯ä»¥åˆ©ç”¨ä¸¤ç§ç¯å¢ƒ

* ç”¨æ‚¨è‡ªå·±çš„ç¯å¢ƒæ›¿æ¢ç©å®¶å‘¨å›´çš„ç¯å¢ƒã€‚
* å°†å†…å®¹ä¸ç›´é€šæ··åˆåˆ›é€ ä¸å‘¨å›´ç¯å¢ƒèä¸ºä¸€ä½“çš„æ²‰æµ¸å¼ä½“éªŒã€‚ ç›¸å…³æ–‡æ¡£ï¼š "Create immersive Unity apps." 


### # Full spaceæ€ä¹ˆåš

* æˆ‘å°†ä»‹ç»å°†å†…å®¹ä» Unity éƒ¨ç½²åˆ°è®¾å¤‡çš„å·¥ä½œæµç¨‹ã€‚
* æ‚¨éœ€è¦è®°ä½ä¸€äº›ä¸æ­¤å¹³å°ä¸Šçš„å›¾å½¢ç›¸å…³çš„äº‹é¡¹ã€‚
* æˆ‘å°†è®¨è®ºå¦‚ä½•ä½¿æ§åˆ¶å™¨è¾“å…¥é€‚åº”æ‰‹åŠ¨è¾“å…¥ï¼Œä»¥åŠ Unity æä¾›çš„ä¸€äº›å·¥å…·æ¥å¸®åŠ©å®Œæˆè¿™ç§è½¬æ¢ã€‚

#### 1. ç¼–è¯‘andéƒ¨ç½²æµç¨‹
* é€‰æ‹©è¯¥å¹³å°çš„æ„å»ºç›®æ ‡ã€‚
* å°±åƒåœ¨ä»»ä½•å…¶ä»– VR å¹³å°ä¸Šä¸€æ ·ï¼Œå¯ç”¨ XR æ’ä»¶ã€‚
* å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä¾èµ–äºæœ¬æœºæ’ä»¶ï¼Œåˆ™éœ€è¦é’ˆå¯¹è¯¥å¹³å°é‡æ–°ç¼–è¯‘å®ƒä»¬ã€‚
* ç”ŸæˆxCodeé¡¹ç›®
* è¿è¡ŒxCodeè¿›è¡Œæ¨¡æ‹Ÿå™¨æˆ–è€…è®¾å¤‡è¿›è¡Œæµ‹è¯•

#### 2. å‡†å¤‡å›¾å½¢æ¸²æŸ“
##### a. é€šç”¨æ¸²æŸ“ç®¡é“

##### b. é™æ€â€œæ³¨è§†ç‚¹æ¸²æŸ“â€(Foveated Rendering)
**æ˜¯ä¸€ç§å°†æ›´å¤šåƒç´ å¯†åº¦é›†ä¸­åœ¨çœ¼ç›å¯èƒ½èšç„¦çš„æ¯ä¸ªé•œå¤´ä¸­å¿ƒçš„æŠ€æœ¯ï¼Œå¹¶å°†è¾ƒå°‘çš„ç»†èŠ‚é›†ä¸­åœ¨çœ¼ç›å¯¹ç»†èŠ‚ä¸å¤ªæ•æ„Ÿçš„å±å¹•å¤–å›´ã€‚**

* ä½¿ç”¨é€šé€æŠ€æœ¯ï¼ˆthroughoutï¼‰æ—¶ï¼Œé™æ€æ³¨è§†ç‚¹æ¸²æŸ“å°†åº”ç”¨äºæ•´ä¸ªç®¡é“ã€‚
* å½“æ‚¨ä½¿ç”¨é€šç”¨æ¸²æŸ“ç®¡é“æ—¶ï¼Œé™æ€æ³¨è§†ç‚¹æ¸²æŸ“å°†åº”ç”¨äºæ•´ä¸ªç®¡é“ã€‚
	* é€‚ç”¨äºæ‰€æœ‰ URP åŠŸèƒ½ï¼ŒåŒ…æ‹¬åå¤„ç†ã€ç›¸æœºå †å ã€HDR ç­‰ã€‚
* è‡ªå®šä¹‰æ¸²æŸ“é€šé“æƒ³ä½¿ç”¨è¯¥åŠŸèƒ½ï¼ŒUnity 2022 ä¸­æä¾›äº†æ–°çš„ APIå¯ä»¥åˆ©ç”¨ã€‚
* ç”±äºæ¸²æŸ“ç°åœ¨å‘ç”Ÿåœ¨éçº¿æ€§ç©ºé—´ä¸­ï¼Œå› æ­¤è¿˜æœ‰ç€è‰²å™¨å®æ¥å¤„ç†é‡æ–°æ˜ å°„ã€‚

##### c. å•é€šé“å®ä¾‹æ¸²æŸ“ï¼š
* å¼•æ“åªéœ€ä¸ºåŒçœ¼æäº¤ä¸€æ¬¡ç»˜åˆ¶è°ƒç”¨ï¼Œå¹¶å‡å°‘æŸäº›éƒ¨åˆ†çš„å¼€é”€æ¸²æŸ“ç®¡é“çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚å‰”é™¤å’Œé˜´å½±ã€‚
* å‡å°‘äº†ä»¥ç«‹ä½“æ–¹å¼æ¸²æŸ“åœºæ™¯çš„ CPU å¼€é”€ã€‚
* ä½¿ç”¨å•é€šé“å®ä¾‹æ¸²æŸ“åœ¨å…¶ä»– VR å¹³å°ä¸Šæ­£ç¡®æ¸²æŸ“ï¼Œç€è‰²å™¨å®å¯ç¡®ä¿å®ƒä¹Ÿå¯ä»¥å¹³æ»‘è¿ç§»è¿‡æ¥ã€‚
##### d. æ·±åº¦ç¼“å†²åŒº
* åº”ç”¨ç¨‹åºæ­£ç¡®å†™å…¥æ¯ä¸ªåƒç´ çš„æ·±åº¦ç¼“å†²åŒºã€‚ï¼ˆAll effectsï¼‰
	* åªè¦æ·±åº¦ä¿¡æ¯ä¸¢å¤±ï¼Œç³»ç»Ÿå°±ä¼šæ¸²æŸ“é”™è¯¯é¢œè‰²ä½œä¸ºæŒ‡ç¤ºã€‚
* Unity shaders work out of the box
	* å·²ç»ä¿®å¤äº†æ‰€æœ‰ Unity ç€è‰²å™¨ï¼Œä»¥å°†æ­£ç¡®çš„å€¼å†™å…¥æ·±åº¦ç¼“å†²åŒº
* è‡ªå®šä¹‰çš„shaderså†™å…¥æ¯ä¸ªåƒç´ çš„æ·±åº¦

#### 3. è¾“å…¥äº¤äº’
* XR äº¤äº’å·¥å…·åŒ…æ·»åŠ äº†æ‰‹éƒ¨è¿½è¸ªåŠŸèƒ½è®©æ‚¨æ›´è½»æ¾åœ°é€‚åº”ç°æœ‰é¡¹ç›®ã€‚
	* XRI æŠ½è±¡äº†è¾“å…¥ç±»å‹ï¼ˆä¾‹å¦‚æ‰‹éƒ¨è·Ÿè¸ªï¼‰ï¼Œå¹¶å°†è¯¥è¾“å…¥è½¬æ¢ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥å“åº”çš„æ“ä½œã€‚
	* å¯ä»¥è·¨æ¥å—ä¸åŒç±»å‹è¾“å…¥çš„å¹³å°å·¥ä½œã€‚
	* XRI å¯ä»¥è½»æ¾å“åº”3D ç©ºé—´å’Œ 3D ç©ºé—´ä¸–ç•Œ UIä¸­çš„å¸¸è§äº¤äº’ï¼Œä¾‹å¦‚æ‚¬åœã€æŠ“å–å’Œé€‰æ‹©ã€‚
	* æä¾›ä¸€ä¸ªè¿åŠ¨ç³»ç»Ÿï¼Œä½¿äººä»¬å¯ä»¥æ›´èˆ’é€‚åœ°ç©¿è¶Šå®Œå…¨æ²‰æµ¸å¼çš„ç©ºé—´ã€‚
* ä½¿ç”¨ Unity è¾“å…¥ç³»ç»Ÿå¯¹å†…ç½®ç³»ç»Ÿæ‰‹åŠ¿
* è®¿é—®åŸå§‹æ‰‹å…³èŠ‚æ•°æ®ï¼Œä¸ Unity Hands Package è¿›è¡Œè‡ªå®šä¹‰äº¤äº’

##### a. Interactableäº¤äº’ç±»å‹
XRI çš„æ ¸å¿ƒæ˜¯ä¸€ç»„åŸºæœ¬çš„ Interactableå’Œ Interactor ç»„ä»¶ã€‚

* ç®€å•çš„äº¤äº’
* Grab
	* å½“é€‰æ‹©æˆ–æŠ“å–å¯¹è±¡æ—¶ï¼Œå®ƒå°†è·Ÿéš Interactorå¹¶åœ¨é‡Šæ”¾æ—¶ç»§æ‰¿å…¶é€Ÿåº¦ã€‚
* Teleport äº¤äº’é¡¹ï¼ˆä¾‹å¦‚ TeleportArea å’Œ TeleportAnchorï¼‰
	* èƒ½å¤Ÿä¸ºç©å®¶å®šä¹‰åŒºåŸŸæˆ–ç‚¹ä¼ é€åˆ°ã€‚æ‚¨è¿˜å¯ä»¥åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰äº¤äº’å¯¹è±¡ã€‚
##### b. äº¤äº’å™¨æœ‰å¤šç§ç±»å‹
* ç›´æ¥äº¤äº’ï¼šè§¦æ‘¸ï¼Œé è¿‘äº¤äº’ç­‰
* å°„çº¿ï¼šè¿œè·ç¦»äº¤äº’
	* å¦‚æœæ˜¯æŠ“å–äº¤äº’ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†å¯¹è±¡ç§»åŠ¨åˆ°ç”¨æˆ·çš„æ‰‹ä¸Šã€‚å°„çº¿äº¤äº’å™¨å¯ä»¥é™åˆ¶æŠ“å–çš„è‡ªç”±åº¦ï¼Œä»¥æ»¡è¶³æ¸¸æˆéœ€æ±‚ã€‚
* Socket Interactorï¼šå‘ç©å®¶å±•ç¤ºæŸä¸ªåŒºåŸŸå¯ä»¥æ¥å—ä¸€ä¸ªç‰©ä½“ã€‚
* æˆ³Pokeäº¤äº’ï¼šé€‰æ‹©å™¨ç­‰
	* ä¸ç›´æ¥äº¤äº’å™¨ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒåŒ…æ‹¬æ–¹å‘è¿‡æ»¤ï¼Œå› æ­¤å¿…é¡»æ‰§è¡Œæ­£ç¡®çš„è¿åŠ¨æ‰èƒ½è§¦å‘äº¤äº’ã€‚
* è§‚çœ‹ï¼ˆGazeï¼‰è¿›è¡Œäº¤äº’ï¼ŒGaze Interactorä¸º Ray Interactor æä¾›äº†ä¸€äº›æ‰©å±•ï¼Œä½¿å‡è§†æ›´å®¹æ˜“å¤„ç†ã€‚
	* ä¾‹å¦‚ï¼ŒGaze Interactors å¯ä»¥è‡ªåŠ¨ä½¿ Interactables çš„ç¢°æ’å™¨æ›´å¤§ï¼Œä»¥ä¾¿æ›´å®¹æ˜“é€‰æ‹©ã€‚
	
```
æ··åˆç»„åˆä½¿ç”¨äº¤äº’
æ‚¨éœ€è¦ä¸ºæ¯ä¸ª XR äº¤äº’çŠ¶æ€ï¼ˆä¾‹å¦‚é€‰æ‹©ï¼‰ç»‘å®šè¾“å…¥æ“ä½œå¼•ç”¨
å¯ä»¥åŒæ‰‹ä½¿ç”¨XRäº¤äº’
```

##### c. Unity è¾“å…¥ç³»ç»Ÿçš„ç³»ç»Ÿæ‰‹åŠ¿è¾“å…¥
* å°†å¹³å°çš„å†…ç½®äº¤äº’ï¼ˆä¾‹å¦‚ç‚¹å‡»æ‰‹åŠ¿ï¼‰æ˜ å°„åˆ°æ‚¨è‡ªå·±çš„äº¤äº’ç³»ç»Ÿã€‚
* ä½¿ç”¨ Unity è¾“å…¥ç³»ç»Ÿä¸­çš„ç»‘å®šè·¯å¾„è®¿é—®å¹¶å“åº”è¿™äº›ç³»ç»Ÿæ‰‹åŠ¿ã€‚
![](./imgs/Bring_unity_ges_binding.png)

* **å¯ä»¥ä½¿ç”¨Unity Hands å­ç³»ç»Ÿé€šè¿‡ Unity Hands åŒ…è®¿é—®ç³»ç»Ÿä¸­çš„æ‰€æœ‰åŸå§‹æ‰‹éƒ¨å…³èŠ‚æ•°æ®ã€‚**(æ–°çš„æ”¯æŒ)
	* åŸå§‹æ‰‹éƒ¨å…³èŠ‚æ•°æ®çš„ä¸€ä¸ªç”¨é€”æ˜¯å°†å…¶æ˜ å°„åˆ°è‡ªå®šä¹‰æ‰‹éƒ¨ç½‘æ ¼è§†è§‰å¯¹è±¡ã€‚
		* æ¯”å¦‚åŒæ–¹say helloï¼Œæ¯”å¿ƒå±•ç¤ºç»™å¯¹æ–¹ï¼Œæé«˜æ²‰æµ¸æ„Ÿã€‚
	* å¯ä»¥ç¼–å†™ä»£ç æ¥æŸ¥çœ‹æ¯ä¸ªå…³èŠ‚å¹¶ç¡®å®šè¯¥å§¿åŠ¿ä¸æŸä¸ªæ‰‹åŠ¿ï¼ˆä¾‹å¦‚ç«–èµ·å¤§æ‹‡æŒ‡æˆ–é£ŸæŒ‡ï¼‰çš„æ¥è¿‘ç¨‹åº¦ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºæ¸¸æˆåŠ¨ä½œ
		* fuckï¼ŒğŸ‘ğŸ»ï¼ŒğŸ‘ŒğŸ»ç­‰æ‰‹åŠ¿
		* ä¸‹é¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•æ¥å‘Šè¯‰æ‚¨é£ŸæŒ‡æ˜¯å¦ä¼¸å‡º
	
```
// Translate raw joints into gameplay actions

static bool IsIndexExtended(XRHand hand)
{
    if (!(hand.GetJoint(XRHandJointID.Wrist).TryGetPose(out var wristPose) &&
          hand.GetJoint(XRHandJointID.IndexTip).TryGetPose(out var tipPose) &&
          hand.GetJoint(XRHandJointID.IndexIntermediate).TryGetPose(out var intermediatePose)))
    {
        return false;
    }

    var wristToTip = tipPose.position - wristPose.position;
    var wristToIntermediate = intermediatePose.position - wristPose.position;
    return wristToTip.sqrMagnitude > wristToIntermediate.sqrMagnitude;
}
```

	

### # æ€»ç»“
* [https://create.unity.com/spatial](https://developer.apple.com/videos/play/wwdc2023/10093/?time=95) æ³¨å†Œä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
* å¯ä»¥ä½¿ç”¨ XR Interaction Toolkitå’Œ Unity Hands åŒ…ã€‚
* è¯·ç”¨ Unity 2022 æˆ–æ›´é«˜ç‰ˆæœ¬
* è€ƒè™‘é‡‡ç”¨é€šç”¨æ¸²æŸ“ç®¡é“ã€‚è™½ç„¶æ”¯æŒå†…ç½®å›¾å½¢ç®¡é“ï¼Œæœªæ¥çš„æ‰€æœ‰æ”¹è¿›éƒ½å°†åœ¨é€šç”¨ç®¡é“ä¸Šè¿›è¡Œã€‚
* å¼€å§‹å°†ä»»ä½•åŸºäºæ§åˆ¶å™¨çš„äº¤äº’è°ƒæ•´ä¸ºæ‰‹éƒ¨äº¤äº’ã€‚æ‚¨ä»Šå¤©å°±å¯ä»¥å¼€å§‹ä½¿ç”¨ XR Interaction Toolkitå’Œ Unity Hands åŒ…ã€‚
* ç›¸å…³æ–‡æ¡£ï¼š
	* "Create immersive Unity apps." 
	* "Build great games for spatial computing" 

åœ°å€ï¼š[https://developer.apple.com/videos/play/wwdc2023/10093/?time=95](https://developer.apple.com/videos/play/wwdc2023/10093/?time=95)